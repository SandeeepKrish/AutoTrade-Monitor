# ðŸ—ï¸ Stock Auto-Cart Dashboard - Architecture

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE (Browser)                     â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   Dashboard  â”‚  â”‚     Cart     â”‚  â”‚ Stock Detailsâ”‚              â”‚
â”‚  â”‚   (Stocks)   â”‚  â”‚  (Auto-add)  â”‚  â”‚   (Charts)   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚              React Frontend (Port 5173)                   â”‚       â”‚
â”‚  â”‚  - Redux State Management                                 â”‚       â”‚
â”‚  â”‚  - React Router (Navigation)                              â”‚       â”‚
â”‚  â”‚  - Axios (HTTP Client)                                    â”‚       â”‚
â”‚  â”‚  - Socket.io (WebSocket Client)                           â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP/HTTPS + WebSocket
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FastAPI Backend (Port 8000)                       â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      API Routes                              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚ Auth â”‚ â”‚Stocksâ”‚ â”‚ Cart â”‚ â”‚Ordersâ”‚ â”‚Rules â”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Business Logic                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚  Automation Engine (Every 5 seconds)               â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  1. Fetch active rules from DB                     â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  2. Get live stock prices                          â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  3. Check if price in range                        â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  4. Auto-add to cart if match                      â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  5. Send WebSocket notification                    â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚   â”‚
â”‚  â”‚  â”‚ Stock Fetcher  â”‚  â”‚ Broker Service â”‚                     â”‚   â”‚
â”‚  â”‚  â”‚ (API Client)   â”‚  â”‚ (Trade Exec)   â”‚                     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    WebSocket Manager                         â”‚   â”‚
â”‚  â”‚  - Real-time price updates                                   â”‚   â”‚
â”‚  â”‚  - Cart notifications                                        â”‚   â”‚
â”‚  â”‚  - User-specific broadcasts                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                           â”‚
                â”‚                           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   MongoDB Database   â”‚    â”‚  Stock Market APIs  â”‚
    â”‚                      â”‚    â”‚                     â”‚
    â”‚  Collections:        â”‚    â”‚  - Yahoo Finance    â”‚
    â”‚  - users             â”‚    â”‚  - NSE Python       â”‚
    â”‚  - stocks            â”‚    â”‚  - Alpha Vantage    â”‚
    â”‚  - cart              â”‚    â”‚  - Zerodha Kite     â”‚
    â”‚  - orders            â”‚    â”‚  - Upstox           â”‚
    â”‚  - rules             â”‚    â”‚                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagrams

### 1. User Registration & Login Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚                â”‚ Frontendâ”‚              â”‚  Backend â”‚
â””â”€â”€â”€â”¬â”€â”€â”˜                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚                        â”‚                        â”‚
    â”‚  1. Enter credentials  â”‚                        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚
    â”‚                        â”‚  2. POST /api/auth/    â”‚
    â”‚                        â”‚     register or login  â”‚
    â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                        â”‚                        â”‚
    â”‚                        â”‚  3. Validate & hash    â”‚
    â”‚                        â”‚     password           â”‚
    â”‚                        â”‚                        â”‚
    â”‚                        â”‚  4. Generate JWT token â”‚
    â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                        â”‚                        â”‚
    â”‚  5. Store token in     â”‚                        â”‚
    â”‚     localStorage       â”‚                        â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
    â”‚                        â”‚                        â”‚
    â”‚  6. Redirect to        â”‚                        â”‚
    â”‚     Dashboard          â”‚                        â”‚
    â”‚                        â”‚                        â”‚
```

### 2. Stock Listing Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Dashboard â”‚         â”‚ Frontendâ”‚         â”‚ Backend â”‚         â”‚Stock API â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                    â”‚                   â”‚                   â”‚
     â”‚ 1. Load page       â”‚                   â”‚                   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚                   â”‚
     â”‚                    â”‚ 2. GET /api/      â”‚                   â”‚
     â”‚                    â”‚    stocks         â”‚                   â”‚
     â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
     â”‚                    â”‚                   â”‚ 3. Fetch prices   â”‚
     â”‚                    â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                    â”‚                   â”‚                   â”‚
     â”‚                    â”‚                   â”‚ 4. Return data    â”‚
     â”‚                    â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                    â”‚ 5. Stock list     â”‚                   â”‚
     â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
     â”‚ 6. Display stocks  â”‚                   â”‚                   â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                   â”‚
     â”‚                    â”‚                   â”‚                   â”‚
```

### 3. Automation Engine Flow (Core Feature!)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ Scheduler    â”‚    â”‚Automationâ”‚    â”‚Stock APIâ”‚    â”‚MongoDBâ”‚   â”‚ User â”‚
â”‚(Every 5 sec) â”‚    â”‚  Engine  â”‚    â”‚         â”‚    â”‚       â”‚   â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”˜
       â”‚                 â”‚                â”‚             â”‚           â”‚
       â”‚ 1. Trigger tick â”‚                â”‚             â”‚           â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚             â”‚           â”‚
       â”‚                 â”‚ 2. Get active  â”‚             â”‚           â”‚
       â”‚                 â”‚    rules       â”‚             â”‚           â”‚
       â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚           â”‚
       â”‚                 â”‚                â”‚             â”‚           â”‚
       â”‚                 â”‚ 3. Rules list  â”‚             â”‚           â”‚
       â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚           â”‚
       â”‚                 â”‚                â”‚             â”‚           â”‚
       â”‚                 â”‚ For each rule: â”‚             â”‚           â”‚
       â”‚                 â”‚ 4. Fetch live  â”‚             â”‚           â”‚
       â”‚                 â”‚    price       â”‚             â”‚           â”‚
       â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚             â”‚           â”‚
       â”‚                 â”‚                â”‚             â”‚           â”‚
       â”‚                 â”‚ 5. Current     â”‚             â”‚           â”‚
       â”‚                 â”‚    price       â”‚             â”‚           â”‚
       â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚           â”‚
       â”‚                 â”‚                â”‚             â”‚           â”‚
       â”‚                 â”‚ 6. Check if    â”‚             â”‚           â”‚
       â”‚                 â”‚    min <= priceâ”‚             â”‚           â”‚
       â”‚                 â”‚    <= max      â”‚             â”‚           â”‚
       â”‚                 â”‚                â”‚             â”‚           â”‚
       â”‚                 â”‚ 7. If YES:     â”‚             â”‚           â”‚
       â”‚                 â”‚    Add to cart â”‚             â”‚           â”‚
       â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚           â”‚
       â”‚                 â”‚                â”‚             â”‚           â”‚
       â”‚                 â”‚ 8. Send        â”‚             â”‚           â”‚
       â”‚                 â”‚    WebSocket   â”‚             â”‚           â”‚
       â”‚                 â”‚    notificationâ”‚             â”‚           â”‚
       â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
       â”‚                 â”‚                â”‚             â”‚           â”‚
       â”‚                 â”‚                â”‚             â”‚  9. Toast â”‚
       â”‚                 â”‚                â”‚             â”‚     alert â”‚
       â”‚                 â”‚                â”‚             â”‚           â”‚
       â”‚ 10. Wait 5 sec  â”‚                â”‚             â”‚           â”‚
       â”‚ 11. Repeat...   â”‚                â”‚             â”‚           â”‚
       â”‚                 â”‚                â”‚             â”‚           â”‚
```

### 4. Price Range Rule Creation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚         â”‚ Frontendâ”‚         â”‚ Backend â”‚         â”‚ MongoDB  â”‚
â””â”€â”€â”€â”¬â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚                 â”‚                   â”‚                   â”‚
    â”‚ 1. Click "Set   â”‚                   â”‚                   â”‚
    â”‚    Price Alert" â”‚                   â”‚                   â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚                   â”‚
    â”‚                 â”‚                   â”‚                   â”‚
    â”‚ 2. Enter range: â”‚                   â”‚                   â”‚
    â”‚    Min: 2750    â”‚                   â”‚                   â”‚
    â”‚    Max: 2850    â”‚                   â”‚                   â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚                   â”‚
    â”‚                 â”‚ 3. POST /api/     â”‚                   â”‚
    â”‚                 â”‚    rules          â”‚                   â”‚
    â”‚                 â”‚    {symbol,       â”‚                   â”‚
    â”‚                 â”‚     min, max}     â”‚                   â”‚
    â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
    â”‚                 â”‚                   â”‚ 4. Save rule      â”‚
    â”‚                 â”‚                   â”‚    with user_id   â”‚
    â”‚                 â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                 â”‚                   â”‚                   â”‚
    â”‚                 â”‚                   â”‚ 5. Confirm        â”‚
    â”‚                 â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                 â”‚ 6. Success        â”‚                   â”‚
    â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
    â”‚ 7. Show toast:  â”‚                   â”‚                   â”‚
    â”‚    "Alert set!" â”‚                   â”‚                   â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                   â”‚
    â”‚                 â”‚                   â”‚                   â”‚
    â”‚ 8. Automation   â”‚                   â”‚                   â”‚
    â”‚    engine will  â”‚                   â”‚                   â”‚
    â”‚    now monitor  â”‚                   â”‚                   â”‚
    â”‚    this rule    â”‚                   â”‚                   â”‚
    â”‚                 â”‚                   â”‚                   â”‚
```

---

## Database Schema

### Users Collection
```javascript
{
  _id: ObjectId("..."),
  email: "user@example.com",
  hashed_password: "$2b$12$...",
  created_at: ISODate("2026-01-15T14:30:00Z")
}
```

### Stocks Collection (Optional - can be hardcoded)
```javascript
{
  _id: ObjectId("..."),
  symbol: "RELIANCE",
  name: "Reliance Industries",
  sector: "Energy",
  market_cap: 1800000000000,
  listed_on: ["NSE", "BSE"]
}
```

### Rules Collection (Core!)
```javascript
{
  _id: ObjectId("..."),
  user_id: "user_object_id",
  symbol: "RELIANCE",
  min_price: 2750.00,
  max_price: 2850.00,
  active: true,
  created_at: ISODate("2026-01-15T14:30:00Z")
}
```

### Cart Collection
```javascript
{
  _id: ObjectId("..."),
  user_id: "user_object_id",
  symbol: "RELIANCE",
  name: "Reliance Industries",
  price: 2800.50,
  added_at: ISODate("2026-01-15T14:35:00Z"),
  auto_added: true  // Flag to indicate it was auto-added
}
```

### Orders Collection
```javascript
{
  _id: ObjectId("..."),
  user_id: "user_object_id",
  symbol: "RELIANCE",
  quantity: 10,
  price: 2800.50,
  total: 28005.00,
  order_type: "BUY",
  status: "PENDING",  // PENDING, EXECUTED, FAILED
  created_at: ISODate("2026-01-15T14:40:00Z"),
  executed_at: null
}
```

---

## Technology Stack Details

### Frontend Stack
```
React 19.2.0
â”œâ”€â”€ State Management: Redux Toolkit 2.11.2
â”œâ”€â”€ Routing: React Router DOM 7.12.0
â”œâ”€â”€ HTTP Client: Axios 1.13.2
â”œâ”€â”€ Charts: Recharts 3.6.0
â”œâ”€â”€ Date/Time: Day.js 1.11.19
â”œâ”€â”€ Icons: Lucide React (recommended)
â”œâ”€â”€ Notifications: React Hot Toast (recommended)
â”œâ”€â”€ Animations: Framer Motion (recommended)
â””â”€â”€ Build Tool: Vite 7.2.4
```

### Backend Stack
```
Python 3.10+
â”œâ”€â”€ Web Framework: FastAPI
â”œâ”€â”€ ASGI Server: Uvicorn
â”œâ”€â”€ Database: MongoDB (Motor - async driver)
â”œâ”€â”€ Authentication: JWT (python-jose)
â”œâ”€â”€ Password Hashing: Passlib + Bcrypt
â”œâ”€â”€ Data Validation: Pydantic
â”œâ”€â”€ WebSocket: FastAPI WebSocket
â”œâ”€â”€ Stock APIs: yfinance, nsepython
â”œâ”€â”€ Scheduling: APScheduler
â””â”€â”€ Data Processing: Pandas, NumPy
```

---

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Layers                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  1. Authentication Layer                                â”‚
â”‚     - JWT tokens (7 days expiry)                        â”‚
â”‚     - Bcrypt password hashing                           â”‚
â”‚     - Protected routes                                  â”‚
â”‚                                                          â”‚
â”‚  2. Authorization Layer                                 â”‚
â”‚     - User-specific data access                         â”‚
â”‚     - Rules belong to users                             â”‚
â”‚     - Cart is user-specific                             â”‚
â”‚                                                          â”‚
â”‚  3. Network Layer                                       â”‚
â”‚     - CORS configured for frontend only                 â”‚
â”‚     - HTTPS in production                               â”‚
â”‚     - Rate limiting (recommended)                       â”‚
â”‚                                                          â”‚
â”‚  4. Data Layer                                          â”‚
â”‚     - MongoDB authentication                            â”‚
â”‚     - Input validation (Pydantic)                       â”‚
â”‚     - SQL injection prevention (NoSQL)                  â”‚
â”‚                                                          â”‚
â”‚  5. API Layer                                           â”‚
â”‚     - Request validation                                â”‚
â”‚     - Error handling                                    â”‚
â”‚     - Logging                                           â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Scalability Considerations

### Current Architecture (Single Server)
- Good for: 100-1000 concurrent users
- Limitations: Single point of failure

### Recommended Improvements for Scale

1. **Load Balancing**
   ```
   Users â†’ Load Balancer â†’ Multiple Backend Instances
   ```

2. **Database Replication**
   ```
   MongoDB Primary â†’ MongoDB Secondaries (Read replicas)
   ```

3. **Caching Layer**
   ```
   Redis Cache â†’ Reduce API calls to stock providers
   ```

4. **Message Queue**
   ```
   Celery + Redis â†’ Handle automation tasks asynchronously
   ```

5. **CDN for Frontend**
   ```
   CloudFlare/AWS CloudFront â†’ Serve static assets
   ```

---

## Monitoring & Logging

### Recommended Tools

1. **Application Monitoring**
   - Sentry (Error tracking)
   - New Relic (Performance)
   - Prometheus + Grafana (Metrics)

2. **Logging**
   - Python: `logging` module
   - Centralized: ELK Stack (Elasticsearch, Logstash, Kibana)

3. **Uptime Monitoring**
   - UptimeRobot
   - Pingdom

---

## Cost Estimation (Monthly)

### Free Tier (Development)
- MongoDB Atlas: Free (512MB)
- Render/Railway: Free tier
- Vercel: Free
- Yahoo Finance API: Free
- **Total: $0/month**

### Production (Small Scale)
- MongoDB Atlas: $9/month (Shared cluster)
- Render: $7/month (Backend)
- Vercel: Free (Frontend)
- Stock API: $0-50/month
- **Total: ~$16-66/month**

### Production (Medium Scale)
- MongoDB Atlas: $57/month (Dedicated)
- AWS EC2: $20-50/month
- CloudFront CDN: $10/month
- Stock API: $50-200/month
- **Total: ~$137-317/month**

---

This architecture is designed to be:
- âœ… Scalable
- âœ… Maintainable
- âœ… Secure
- âœ… Cost-effective
- âœ… Production-ready
